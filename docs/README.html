<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 6.0.2.1.0 (Linux)"/>
	<meta name="created" content="2018-04-16T21:23:38.583343612"/>
	<meta name="changed" content="2018-04-25T20:46:37.291379625"/>
	<style type="text/css">
		@page { margin: 2cm }
		p { margin-top: 0.1cm; margin-bottom: 0cm; line-height: 150%; orphans: 2; page-break-before: auto }
		p.western { font-size: 11pt }
		p.cjk { font-size: 10pt; font-weight: normal }
		h1 { margin-top: 1cm; line-height: 200%; text-align: center; page-break-before: auto }
		h1.western { font-family: "Bitstream Vera Sans", sans-serif; font-size: 20pt }
		h1.cjk { font-size: 10pt; font-weight: normal }
		h1.ctl { font-size: 12pt; font-weight: normal }
		h2 { margin-top: 0.8cm; margin-bottom: 0.4cm; line-height: 150%; text-align: center; page-break-before: auto }
		h2.western { font-family: "Bitstream Vera Sans", sans-serif }
		h2.cjk { font-family: "Lucida Sans Unicode"; font-size: 10pt; font-weight: normal }
		h2.ctl { font-family: "Tahoma"; font-size: 12pt; font-weight: normal }
		h3 { margin-top: 0.6cm; margin-bottom: 0.3cm; line-height: 100%; page-break-before: auto; page-break-after: auto }
		h3.western { font-family: "Bitstream Vera Sans", sans-serif; font-size: 16pt; font-style: normal }
		h3.cjk { font-family: "Lucida Sans Unicode"; font-size: 10pt; font-weight: normal }
		h3.ctl { font-family: "Tahoma"; font-size: 12pt; font-weight: normal }
		h4 { margin-top: 0.4cm; margin-bottom: 0.2cm; line-height: 150%; text-align: left; page-break-before: auto; page-break-after: auto }
		h4.western { font-family: "Bitstream Vera Sans", sans-serif; font-size: 14pt; font-style: normal }
		h4.cjk { font-family: "Lucida Sans Unicode"; font-size: 10pt; font-weight: normal }
		h4.ctl { font-family: "Tahoma"; font-size: 12pt; font-weight: normal }
		pre { line-height: 150%; page-break-before: auto }
		pre.western { font-family: "Bitstream Vera Sans Mono", monospace; font-size: 11pt }
		pre.cjk { font-family: "Lucida Sans Unicode"; font-size: 10pt; font-weight: normal }
		pre.ctl { font-family: "Tahoma"; font-size: 12pt }
		pre.php-western { margin-left: 0.2cm; margin-right: 0.2cm; margin-top: 0.2cm; margin-bottom: 0.1cm; color: #001f3f; font-family: "Bitstream Vera Sans Mono", monospace; font-size: 9pt; font-style: normal; font-weight: normal; line-height: 100%; background: #dfdfdf; page-break-after: avoid }
		pre.php-cjk { margin-left: 0.2cm; margin-right: 0.2cm; margin-top: 0.2cm; margin-bottom: 0.1cm; color: #001f3f; font-family: "Lucida Sans Unicode"; font-size: 10pt; font-weight: normal; line-height: 100%; background: #dfdfdf; page-break-after: avoid }
		pre.php-ctl { margin-left: 0.2cm; margin-right: 0.2cm; margin-top: 0.2cm; margin-bottom: 0.1cm; color: #001f3f; font-family: "Tahoma"; font-size: 12pt; line-height: 100%; background: #dfdfdf; page-break-after: avoid }
		pre.shell-western { margin-left: 0.2cm; margin-right: 0.2cm; margin-top: 0.2cm; margin-bottom: 0.1cm; color: #000000; font-family: "Bitstream Vera Sans Mono", monospace; font-size: 9pt; line-height: 100%; background: #ffffef; page-break-after: auto }
		pre.shell-cjk { margin-left: 0.2cm; margin-right: 0.2cm; margin-top: 0.2cm; margin-bottom: 0.1cm; color: #000000; font-family: "Lucida Sans Unicode"; font-size: 10pt; font-weight: normal; line-height: 100%; background: #ffffef; page-break-after: auto }
		pre.shell-ctl { margin-left: 0.2cm; margin-right: 0.2cm; margin-top: 0.2cm; margin-bottom: 0.1cm; color: #000000; font-family: "Tahoma"; font-size: 12pt; line-height: 100%; background: #ffffef; page-break-after: auto }
		a.cjk:link { so-language: zxx }
		a.ctl:link { so-language: zxx }
		a.western:visited { so-language: en-GB }
	</style>
</head>
<body lang="en-GB" bgcolor="#efefef" dir="ltr">
<h1 class="western">SimpleESI</h1>
<h3 class="western" align="center"><i>Programming the EVE Swagger
Interface (ESI)</i></h3>
<h3 class="western" align="center"><i>The Simple And Easy Way</i></h3>
<h3 class="western" align="center"><i>in PHP</i></h3>
<hr/>

<h2 class="western">Introduction</h2>
<p class="western" style="orphans: 2"><b>What is it?</b> SimpleESI is
an Application Programming Interface (API) for writing third-party
applications to the game EVE Online. It builds on the existing
interface called the EVE Swagger Interface (ESI), but tries to
provide a slim and yet “All In One” alternative to it. In
comparison, the default API for PHP consists of 377 files with more
than 227,000 lines of machine-generated code, whereas SimpleESI
consists of one single file with less than 600 lines of code (see
also <b>Features</b> below).</p>
<p class="western" style="orphans: 2"><b>For whom is it?</b>
SimpleESI is for everyone, from beginners in web design who don’t
want to commit to the full API yet, to the intermediate who is
looking to gain an advantage in the game without spending too much
time on programming, as well as for the professional who needs a
compact API for implementing gadgets.</p>
<p class="western" style="orphans: 2"><b>Where can I learn more about
it?</b> You will find a list of features as well as several code
examples below. A reference manual is in production and will be
provided soon.</p>
<p class="western" style="orphans: 2"><br/>

</p>
<p class="western" style="orphans: 2">To learn more about the game
itself and as well its API please follow these links:</p>
<p class="western" style="orphans: 2"><a class="western" href="https://www.ccpgames.com/">CCP
Games</a> and <a class="western" href="https://www.eveonline.com/">EVE
Online</a></p>
<p class="western" style="orphans: 2"><a class="western" href="https://forums.eveonline.com/">Game
Forum</a> and <a class="western" href="https://forums.eveonline.com/c/technology-research/third-party-developers">Game
Forum on 3</a><a class="western" href="https://forums.eveonline.com/c/technology-research/third-party-developers"><sup>rd</sup></a><a class="western" href="https://forums.eveonline.com/c/technology-research/third-party-developers">
Party Software Development</a></p>
<p class="western" style="orphans: 2"><a class="western" href="https://developers.eveonline.com/resource/license-agreement">Developer
License Agreement</a> and <a class="western" href="https://esi.tech.ccp.is/ui/">The
EVE Swagger Interface</a></p>
<p class="western" style="orphans: 2"><a class="western" href="https://developers.eveonline.com/blog">3</a><a class="western" href="https://developers.eveonline.com/blog"><sup>rd</sup></a><a class="western" href="https://developers.eveonline.com/blog">
Party Developer Blog</a>, <a class="western" href="https://developers.eveonline.com/resource/resources">Resources</a>
and <a class="western" href="https://developers.eveonline.com/applications">Managing
Applications</a></p>
<p class="western" style="orphans: 2"><a class="western" href="https://developers.eveonline.com/blog/article/swagger-codegen">The
Swagger CodeGen</a> and <a class="western" href="https://developers.eveonline.com/blog/article/sso-to-authenticated-calls">Description
of the SSO Procedure</a></p>
<p class="western" style="orphans: 2"><br/>

</p>
<p class="western" style="orphans: 2">Important notice:</p>
<p class="western" style="orphans: 2">© 2014 CCP hf. All rights
reserved. &quot;EVE&quot;, &quot;EVE Online&quot;, &quot;CCP&quot;,
and all related logos and images are trademarks or registered
trademarks of CCP hf.</p>
<p class="western" style="orphans: 2">© 2018 SimpleESI, GPLv3
applies.</p>
<hr/>

<h2 class="western">Features</h2>
<h3 class="western"><i>Compact</i></h3>
<p class="western" style="orphans: 2">- A single file, with one PHP
class and five essential methods.</p>
<p class="western" style="orphans: 2">- Less than 600 lines of code.</p>
<p class="western" style="orphans: 2">- Can be used instantly.</p>
<h3 class="western"><i>Fast</i></h3>
<p class="western" style="orphans: 2">- Support of multiple &amp;
single requests over HTTP/1.1 &amp; HTTP/2.</p>
<p class="western" style="orphans: 2">- Request caching, with respect
to ESI's expiration timers.</p>
<p class="western" style="orphans: 2">- Support of Just-In-Time
processing with callbacks.</p>
<p class="western" style="orphans: 2">- Full page set retrieval, in-
and out-of-order.</p>
<h3 class="western"><i>Tolerant</i></h3>
<p class="western" style="orphans: 2">- Automatic retrial on failed
requests.</p>
<p class="western" style="orphans: 2">- Dynamic throttling and exit,
with respect to ESI's error limit.</p>
<h3 class="western"><i>Nice</i></h3>
<p class="western" style="orphans: 2">- Provides an easy
&quot;key/value&quot;-database for meta data storage.</p>
<p class="western" style="orphans: 2">- Can use SQLite3 or plain
directories &amp; files for storage.</p>
<p class="western" style="orphans: 2">- Logging of errors, traffic
flow and performance timings.</p>
<p class="western" style="orphans: 2">- Support of SSO OAuth2
authorization.</p>
<p class="western" style="orphans: 2">- Few configuration options.</p>
<hr/>

<h2 class="western">Installation</h2>
<h3 class="western">General</h3>
<p class="western" style="orphans: 2">Apart from fulfilling the
platform-specific needs for PHP does one only need to download
<font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">SimpleESI.php</span></font>
and can begin using it. Additionally can one download the examples
and the documentation, too. To follow the examples (see below) is it
best to <a class="western" href="https://github.com/sdack/SimpleESI/archive/master.zip">download
the directory from GitHub as a ZIP file</a> and to extract it.</p>
<p class="western" style="orphans: 2"><u>Note:</u> SimpleESI is free
software. Please add a copy of the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">LICENSE</span></font>
file (i.e. as <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">LICENSE.SimpleESI</span></font>)
when you include it with your own software so that it can remain
free.</p>
<h3 class="western">Linux (Debian)</h3>
<p class="western" style="orphans: 2"><img src="SimpleESI-LinuxDebian.png" name="Image1" align="right" width="773" height="362" border="0"/>
Any
recent Linux distribution with PHP7.2, cURL7.58 and SQLite3.22 should
work.<br clear="right"/>

</p>
<p class="western" style="orphans: 2">The required packages for a
Debian-based distribution are called <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">php</span></font>,
<font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">php-curl</span></font>
and <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">php-sqlite3</span></font>:</p>
<pre class="shell-western">$ sudo apt-get install php php-curl php-sqlite3</pre><p class="western" style="orphans: 2">
<br/>

</p>
<h3 class="western">Windows (native)</h3>
<p class="western" style="orphans: 2">It is currently unknown to me
what works. It will however likely need the cURL option
<font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">CURLOPT_SSL_VERIFYPEER</span></font>
set to false, because the native binaries of PHP for Windows do not
include any SSL certificates … I will update this part once I know
more.</p>
<p class="western" style="orphans: 2"><br/>

</p>
<h3 class="western">Windows (Cygwin)</h3>
<p class="western" style="orphans: 2"><img src="SimpleESI-Cygwin.png" name="Windows" align="right" width="727" height="454" border="0"/>
Using
Cygwin 2.10 from <a class="western" href="http://www.cygwin.com/">http://www.cygwin.com/</a>
works and it supports Windows Vista, 7, 8 and 10. To install PHP does
one need to select it during the installation process. Cygwin
provides a UNIX/Linux-like environment under Windows and supports
many popular open source packages.<br clear="right"/>

</p>
<p class="western" style="orphans: 2">One will have to use the
installer’s search function during the installation to find it.
Easiest is to select the entire PHP tree … Once the installation
has completed can one run Cygwin and use it like a regular UNIX/Linux
shell.</p>
<p class="western" style="orphans: 2"><br/>

</p>
<h3 class="western">Windows 10 (WSL with Debian)</h3>
<p class="western" style="orphans: 2"><img src="SimpleESI-Win10WSLDebian.png" name="Windows 10" align="right" width="793" height="363" border="0"/>
Debian
under Windows 10 with the Windows Subsystem for Linux (WSL) works,
too. However, the Debian distribution first requires an upgrade.
Microsoft only provides an older version of Debian (Debian 9 /
“Stretch”) and the included packages are already older than what
is required. The Windows Subsystem for Linux allows Windows 10 to run
native Linux software within Windows.<br clear="right"/>

</p>
<p class="western" style="orphans: 2">To install WSL for Windows does
one need to follow the steps described by Microsoft
<a class="western" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">https://docs.microsoft.com/en-us/windows/wsl/install-win10</a>.
After entering a username and a password can one upgrade the
distribution to Debian 10 / “Buster” as follows:</p>
<p class="western" style="orphans: 2"><br/>

</p>
<pre class="shell-western">$ sudo sed -i~ -e 's/stretch/buster/' /etc/apt/sources.list
$ sudo apt-get update
$ sudo apt-get dist-upgrade
$ sudo apt-get autoremove
$ sudo apt-get autoclean
$ sudo apt-get install php php-curl php-sqlite3</pre><p class="western" style="orphans: 2">
<br/>

</p>
<p class="western" style="orphans: 2">One will be asked to say “yes”
or “no” during the upgrade and one can safely say “yes” to
all of the questions. The last line here will install PHP together
with cURL and SQLite3 support as shown above for Linux.</p>
<hr/>

<h2 class="western">Examples</h2>
<h4 class="western">1. A single request.</h4>
<pre class="php-western">&lt;?php
require_once 'SimpleESI.php';

$esi = new SimpleESI;
$esi-&gt;get($veldspar, 'universe/types/1230/')-&gt;exec();

echo $veldspar['description'].PHP_EOL;
?&gt;</pre><p class="western" style="orphans: 2">
<br/>

</p>
<pre class="shell-western">$ php -f examples/example-1.php
The most common ore type in the known universe, veldspar can be found almost everywhere. It is still in constant demand as it holds a large portion of the much-used tritanium mineral. 

Available in &lt;color='0xFF33FFFF'&gt;1.0&lt;/color&gt; security status solar systems or lower.</pre><p class="western" style="orphans: 2">
<br/>

</p>
<p class="western" style="orphans: 2"><b>What it does:</b> it creates
a SimpleESI object to get data on item type 1230 and prints its
description.</p>
<p class="western" style="orphans: 2">The <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">get()</span></font>-method
of the class SimpleESI is used to queue a request. The <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">exec()</span></font>-method
executes queued requests and stores responses in variables that were
previously passed to the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">get()</span></font>-method.</p>
<p class="western" style="orphans: 2">Before sending requests to the
server does the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">exec()</span></font>-method
check its cache to see if it has executed the same request recently,
and if so, gets it from its cache without sending a request to the
server. This is done with respect to the ESI server’s expiration
timers so no redundant requests are being send and to speed up
program execution. Only when no match is found, or when it has
expired, will the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">exec()</span></font>-method
send a request to the server to get a new response. It then also
updates its cache.</p>
<h4 class="western">2. Some more requests.</h4>
<pre class="php-western">&lt;?php
require_once 'SimpleESI.php';

$esi = new SimpleESI;
$esi-&gt;get($items, [9832, 33468, 12612], 'universe/types/~/')
    -&gt;get($status, 'status/')
    -&gt;exec();

foreach ($items as $id =&gt; $thing)
    echo $thing['name'].' has got an id of '.$id.'.'.PHP_EOL;

echo 'There are currently '.$status['players'].' players in EVE Online.'.PHP_EOL;
?&gt;</pre><p class="western" style="orphans: 2">
<br/>

</p>
<pre class="shell-western">$ php -f examples/example-2.php
Coolant has got an id of 9832.
Astero has got an id of 33468.
Void S has got an id of 12612.
There are currently 21356 players in EVE Online.</pre><p class="western" style="orphans: 2">
<br/>

</p>
<p class="western" style="orphans: 2"><b>What it does:</b> the object
is being used to get the game's current status as well as data on 3
item types. The ids for the items are being provided as an array
together with a pattern from which it forms the requests. The
requests are then executed. Once completed does it print the names
and ids of the items, and last but not least, the number of players
online.</p>
<p class="western" style="orphans: 2">The <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">get()</span></font>-method
allows to queue multiple requests and can create them automatically
when given an array and a pattern. The values of the passed array are
being inserted at the position of the marker (<font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">~</span></font>-sign).
The returned data is stored as an array in the variable and the
values of the array become the keys to the responses. The line:</p>
<pre class="php-western">$esi-&gt;get($items, [9832, 33468, 12612], 'universe/types/~/')</pre><p class="western" style="orphans: 2">
is equivalent to:</p>
<pre class="php-western">$esi-&gt;get($items[9832], 'universe/types/9832/')
    -&gt;get($items[33468], 'universe/types/33468/')
    -&gt;get($items[12612], 'universe/types/12612/')</pre><p class="western" style="orphans: 2">
The <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">exec()</span></font>-method
will first attempt to answer the requests from its cache, but then
sends out any remaining requests to the ESI server in parallel. This
allows the ESI server to respond to multiple requests at once,
allowing it to reply in any order it sees fit, which speeds up
program execution.</p>
<h4 class="western">3. What is The Forge's id?</h4>
<pre class="php-western">&lt;?php
require_once 'SimpleESI.php';

$esi = new SimpleESI;
$esi-&gt;post($bulk, 'universe/ids/', ['The Forge'])-&gt;exec();

if (isset($bulk['regions'][0]['id']))
    echo 'The Forge\'s id is '.$bulk['regions'][0]['id'].'.'.PHP_EOL;
?&gt;</pre><p class="western" style="orphans: 2">
<br/>

</p>
<pre class="shell-western">$ php -f examples/example-3.php
The Forge's id is 10000002.</pre><p class="western" style="orphans: 2">
<br/>

</p>
<p class="western" style="orphans: 2"><b>What it does:</b> the object
is used to send a POST request to the ESI server, in order to get the
id of The Forge. When found does it print out the id.</p>
<p class="western" style="orphans: 2">The <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">post()</span></font>-method
encodes the array (… <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">[‘The
Forge’]</span></font>) and sends it directly to the ESI server.
POST requests are not cached and are considered slow. They are
commonly used to send bulk data to the ESI server as well as for
controlling the game client through ESI for instance.</p>
<h4 class="western">4. Where is The Forge's id?</h4>
<pre class="php-western">&lt;?php
require_once 'SimpleESI.php';

$esi = new SimpleESI;
$esi-&gt;get($result, 'search/?categories=region&amp;strict=1&amp;', ['search' =&gt; 'The Forge'])-&gt;exec();

if (isset($result['region'][0]))
    echo 'The Forge\'s id is '.$result['region'][0].'.'.PHP_EOL;
?&gt;</pre><p class="western" style="orphans: 2">
<br/>

</p>
<pre class="shell-western">$ php -f examples/example-4.php
The Forge's id is 10000002.</pre><p class="western" style="orphans: 2">
<br/>

</p>
<p class="western" style="orphans: 2"><b>What it does:</b> the object
is again used to get The Forge's region id, this time by using ESI's
search function, and once found printed out.</p>
<p class="western" style="orphans: 2">When an associative array is
being passed as argument to the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">get()</span></font>-method
and after the resource path then it creates an URL query string,
which is appended to the resource path. This is useful for strings
containing characters that need to be encoded, such as <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">‘The
Forge’</span></font>. Here it creates:</p>
<p class="western" style="orphans: 2"><font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">'search/?categories=region&amp;strict=1&amp;search=The%20Forge'</span></font></p>
<p class="western" style="orphans: 2">before adding it to the queue
and executing it.</p>
<h4 class="western">5. Which is The Forge’s id?</h4>
<pre class="php-western">&lt;?php
require_once 'SimpleESI.php';

$esi = new SimpleESI;

$RegionNameToId = $esi-&gt;meta('RegionNameToId');

if (empty($RegionNameToId)) {
    $esi-&gt;get($RegionIds, 'universe/regions/')
        -&gt;exec()
        -&gt;get($Regions, $RegionIds, 'universe/regions/~/')
        -&gt;exec();
    $RegionNameToId = array_column($Regions, 'region_id', 'name');
    $esi-&gt;meta('RegionNameToId', $RegionNameToId);
}

if (isset($RegionNameToId['The Forge']))
    echo 'The Forge\'s id is '.$RegionNameToId['The Forge'].'.'.PHP_EOL;
?&gt;</pre><p class="western" style="orphans: 2">
<br/>

</p>
<pre class="shell-western">$ php -f examples/example-5.php
The Forge's id is 10000002.</pre><p class="western" style="orphans: 2">
<br/>

</p>
<p class="western" style="orphans: 2"><b>What it does:</b> it creates
a SimpleESI object to see if it holds an array in its meta database
for mapping region names to ids. If it cannot find one then it uses
the object to create it by first requesting the list of region ids,
then requesting the data on all regions based on their ids in a
second execution, and then uses the PHP function <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">array_column()</span></font>
to map the ids of every region to its name. It then stores the
associative array in the meta database so it can find it again next
time. Finally, it prints the id of The Forge.</p>
<p class="western" style="orphans: 2">The <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">meta()</span></font>-method
functions as a simple “key/value”-database, which is stored
alongside with the cache. It allows an application to reduce the
number of its ESI requests to an essential minimum. By storing static
data such as the names of regions in a local database can one save
time and speed up execution. When passed a single argument does the
<font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">meta()</span></font>-method
work as a query. With two arguments does it work as an assignment
(“key = value”).</p>
<p class="western" style="orphans: 2"><u>Note:</u> all requests to
the ESI server take time. The fastest request is the one, which does
not need to be made!</p>
<h4 class="western">6. All things new and gone.</h4>
<pre class="php-western">&lt;?php
require_once 'SimpleESI.php';

$esi = new SimpleESI;

$esi-&gt;get($TypeIdsBook, 'universe/types/')
    -&gt;get($TSTypeIdsBook, 'universe/types/?datasource=singularity')
    -&gt;exec();

$old_ids = $new_ids = [];
foreach ($TypeIdsBook as $page)
    foreach ($page as $id)
        $old_ids[] = $id;
foreach ($TSTypeIdsBook as $page)
    foreach ($page as $id)
        $new_ids[] = $id;

echo 'Number of item types found on Tranquility: '.count($old_ids).PHP_EOL;
echo '                              Singularity: '.count($new_ids).PHP_EOL;

$missing_ids = array_diff($old_ids, $new_ids);
echo PHP_EOL.'   Missing on Singularity: '.count($missing_ids).PHP_EOL;
$esi-&gt;get($MissingTypes, $missing_ids, 'universe/types/~/')-&gt;exec();
if (isset($MissingTypes))
    foreach ($MissingTypes as $type)
        echo '      #'.$id.' - \''.($type['name'] ?? '- unknown -').'\''.PHP_EOL;

$added_ids = array_diff($new_ids, $old_ids);
echo PHP_EOL.'   New on Singularity: '.count($added_ids).PHP_EOL;
$esi-&gt;get($AddedTypes, $added_ids, 'universe/types/~/?datasource=singularity')-&gt;exec();
if (isset($AddedTypes))
    foreach ($AddedTypes as $id =&gt; $type)
        echo '      #'.$id.' - \''.($type['name'] ?? '- unknown -').'\''.PHP_EOL;
?&gt;</pre><p class="western" style="orphans: 2">
<br/>

</p>
<pre class="shell-western">$ php -f examples/example-6.php
Number of item types found on Tranquility: 34029
                              Singularity: 34034

   Missing on Singularity: 0

   New on Singularity: 5
      #47861 - 'Capsuleer Day - Dungeon Spawner'
      #47881 - 'Outpost Conversion Rig 1'
      #47882 - 'Outpost Conversion Rig 2'
      #47883 - 'Outpost Conversion Rig 3'
      #47884 - 'Outpost Conversion Rig 4'</pre><p class="western" style="orphans: 2">
<br/>

</p>
<p class="western" style="orphans: 2"><b>What it does:</b> the object
is used to get the list of all type ids from Tranquility and
Singularity. It prints the number of item types found for each
server, computes their difference and shows which items can only be
found on the test server, and which are missing.</p>
<p class="western" style="orphans: 2">Due to their large size are the
lists only available as sets of pages – books. This technique
allows the ESI server to respond to every application in a fair
manner without one, single application blocking it. It also requires
applications to send a request for every page before the data can be
processed in its entirety.</p>
<p class="western" style="orphans: 2">The <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">exec()</span></font>-method
detects when responses are being segmented into pages and will send
additional requests automatically. On completion will a variable hold
an array with all pages in their correct order.</p>
<h4 class="western">7. The price of PLEX.</h4>
<pre class="php-western">&lt;?php
require_once 'SimpleESI.php';

$esi = new SimpleESI;

$RegionsOfInterest = [ 10000002 =&gt; 'The Forge'  , 10000030 =&gt; 'Heimatar',
                       10000032 =&gt; 'Sinq Laison', 10000043 =&gt; 'Domain' ];
$IdOfPLEX = 44992;

$GLOBALS += $esi-&gt;meta('GLOBALS') ?: [];

$esi-&gt;get($SellOrders,
          array_keys($RegionsOfInterest),
          'markets/~/orders/?order_type=sell&amp;type_id='.$IdOfPLEX,
          'orders_callback')
    -&gt;exec();
function orders_callback($esi, $rq) {
    global $Stations;
    foreach ($rq-&gt;vl as $order)
        if (isset($order['location_id'])) {
            $id = $order['location_id'];
            if (empty($Stations[$id]))
                $esi-&gt;get($Stations[$id], 'universe/stations/'.$id.'/', 24*60*60, 'station_callback');
        }
}
function station_callback($esi, $rq) {
    global $Systems;
    if (isset($rq-&gt;vl['system_id'])) {
        $id = $rq-&gt;vl['system_id'];
        if (empty($Systems[$id]))
            $esi-&gt;get($Systems[$id], 'universe/systems/'.$id.'/', 30*60);
    }
}

foreach ($RegionsOfInterest as $id =&gt; $name) {
    echo 'The best 3 sell orders for PLEX in '.$name.':'.PHP_EOL;
    $orders = [];
    foreach ($SellOrders[$id] as $page)
        foreach ($page as $order)
            $orders[] = $order;
    usort($orders, function ($a, $b) { return $a['price'] &lt;=&gt; $b['price']; });
    for ($i = 0; $i &lt; 3; ++$i) {
        $o = $orders[$i];
        $station = $Stations[$o['location_id']];
        $system = $Systems[$station['system_id']];
        $security = $system['security_status'];
        printf('   %10.2f ISK (%4d units) - %10s (%.1f) %s'.PHP_EOL,
               $o['price'], $o['volume_remain'], $system['name'], $security, $station['name']);
    }
}

$esi-&gt;meta('GLOBALS', [ 'Stations' =&gt; $Stations,
                        'Systems'  =&gt; $Systems ]);
?&gt;</pre><p class="western" style="orphans: 2">
<br/>

</p>
<pre class="shell-western">$ php -f examples/example-7.php
The best 3 sell orders for PLEX in The Forge:
   2930000.00 ISK (1266 units) -       Jita (0.9) Jita IV - Moon 4 - Caldari Navy Assembly Plant
   2995999.99 ISK ( 500 units) -       Jita (0.9) Jita IV - Moon 4 - Caldari Navy Assembly Plant
   2996000.00 ISK ( 792 units) -       Jita (0.9) Jita IV - Moon 4 - Caldari Navy Assembly Plant
The best 3 sell orders for PLEX in Heimatar:
   2899999.90 ISK ( 174 units) -       Rens (0.9) Rens VI - Moon 8 - Brutor Tribe Treasury
   2900000.00 ISK ( 469 units) -       Rens (0.9) Rens VI - Moon 8 - Brutor Tribe Treasury
   2988973.99 ISK (1029 units) -       Rens (0.9) Rens VI - Moon 8 - Brutor Tribe Treasury
The best 3 sell orders for PLEX in Sinq Laison:
   3006599.91 ISK ( 128 units) -    Dodixie (0.9) Dodixie IX - Moon 20 - Federation Navy Assembly Plant
   3006599.92 ISK ( 310 units) -    Dodixie (0.9) Dodixie IX - Moon 20 - Federation Navy Assembly Plant
   3006990.00 ISK (1990 units) -    Dodixie (0.9) Dodixie IX - Moon 20 - Federation Navy Assembly Plant
The best 3 sell orders for PLEX in Domain:
   3000000.00 ISK ( 375 units) -    Fahruni (0.5) Fahruni XII - Sisters of EVE Bureau
   3000000.00 ISK ( 377 units) -      Amarr (1.0) Amarr VIII (Oris) - Emperor Family Academy
   3050000.00 ISK (1000 units) -      Amarr (1.0) Amarr VIII (Oris) - Emperor Family Academy</pre><p class="western" style="orphans: 2">
<br/>

</p>
<p class="western" style="orphans: 2"><b>What it does:</b> the
SimpleESI object is used to set two global variables with the help of
the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">meta()</span></font>-method.
It is then used to queue 4 requests for sell orders on PLEX, one for
each region of interest, and to execute the requests. The last
argument passed to the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">get()</span></font>-method
is the name of a function, which will be called at the moment a
response arrives and once for each of the four requests. The callback
function <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">orders_callback()</span></font>
will then itself queue additional requests and for every station
listed in the sell orders, if the station is not already known. These
secondary requests themselves have a second callback function
<font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">station_callback()</span></font>
registered with them. The secondary callback is used to queue even
more requests, one for each system it does not yet know about. Once
all requests have been executed does it print out the 3 best PLEX
sell orders for each region of interest. At the end is the object
used again to store system and station information so it can be
retrieved again later.</p>
<p class="western" style="orphans: 2">Requests queued with the
<font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">get()</span></font>-method
from within callbacks do not require an explicit call to the
<font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">exec()</span></font>-method,
because the requests are being queued while an execution is already
running. The calls to the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">get()</span></font>-method
inside the callback functions further each get passed a numeric
argument. This number is used to briefly extend the expiration time
of a request artificially. The reason why this can be useful is
because some resources of the ESI have unusual expiration times, or
simply fall onto the downtime. So does the information on stations
expire within only 5 minutes. Yet the stations themselves do not seem
to change at all... It is because of the office rent prices contained
within the information that their data expires so quickly. Yet for
this application are the rent prices of no interest and therefore it
makes sense to ignore the short expiration timers and to extend these
artificially by +24 hours. The information on solar systems expires
every 24 hours during downtime where the ESI server is unavailable.
Extending the expiration timers for such resources artificially by
+30 minutes can help in avoiding the downtime.</p>
<p class="western" style="orphans: 2">Callbacks allow to react to
responses the moment these arrive, and before all requests have been
answered and before execution ends. This speeds up applications by
exploiting the ESI server’s ability to respond to requests out of
order.</p>
<p class="western" style="orphans: 2"><u>Note:</u> due to the current
structure of the ESI does this example only list prices found at NPC
stations and does not include sell orders at player-owned stations.</p>
<h4 class="western">8. Onto the Web!</h4>
<pre class="php-western">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;meta http-equiv=&quot;refresh&quot; content=&quot;300&quot;&gt;&lt;head&gt;&lt;style&gt;
body      { color: #ffffff; background-color: #373737; }
table     { width: 100%; }
tr.region { font-size: 90%; margin: 0px; text-align:   left; background-color: #5f5f5f; }
tr.head   { font-size: 80%; margin: 0px; text-align: center; background-color: #4f4f4f; }
tr.data   { font-size: 70%; margin: 0px; text-align:  right; }
td, th    { padding-left: 5px; padding-right: 5px; padding-top: 0px; padding-bottom: 0px; }
&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;table&gt;
&lt;?php
require_once '../SimpleESI.php';

$esi = new SimpleESI;

if (isset($_GET['debug'])) {
    $esi-&gt;debug_level = 4;
    $esi-&gt;debug_html = true;
}

$RegionsOfInterest = [ 10000002 =&gt; 'The Forge'  , 10000030 =&gt; 'Heimatar',
                       10000032 =&gt; 'Sinq Laison', 10000043 =&gt; 'Domain' ];
$IdOfPLEX = 44992;

$GLOBALS += $esi-&gt;meta('GLOBALS') ?: [];

$esi-&gt;get($SellOrders,
          array_keys($RegionsOfInterest),
          'markets/~/orders/?order_type=sell&amp;type_id='.$IdOfPLEX,
          'orders_callback')
    -&gt;exec();
function orders_callback($esi, $rq) {
    global $Stations;
    foreach ($rq-&gt;vl as $order)
        if (isset($order['location_id'])) {
            $id = $order['location_id'];
            if (empty($Stations[$id]))
                $esi-&gt;get($Stations[$id], 'universe/stations/'.$id.'/', 24*60*60, 'station_callback');
        }
}
function station_callback($esi, $rq) {
    global $Systems;
    if (isset($rq-&gt;vl['system_id'])) {
        $id = $rq-&gt;vl['system_id'];
        if (empty($Systems[$id]))
            $esi-&gt;get($Systems[$id], 'universe/systems/'.$id.'/', 30*60);
    }
}

foreach ($RegionsOfInterest as $id =&gt; $name) {
    echo '&lt;tr class=&quot;region&quot;&gt;&lt;th colspan=&quot;10&quot;&gt;The best 3 sell orders for PLEX in '.$name.'&lt;/th&gt;&lt;/tr&gt;';
    $orders = [];
    foreach ($SellOrders[$id] as $page)
        foreach ($page as $order)
            $orders[] = $order;
    usort($orders, function ($a, $b) { return $a['price'] &lt;=&gt; $b['price']; });
    echo '&lt;tr class=&quot;head&quot;&gt;'
        .     '&lt;th colspan=&quot;2&quot;&gt;Price &amp; Volume&lt;/th&gt;&lt;th&gt;System&lt;/th&gt;&lt;th&gt;Security&lt;/th&gt;'
        .     '&lt;th style=&quot;text-align:left&quot;&gt;Station&lt;/th&gt;&lt;/h5&gt;&lt;/tr&gt;';
    for ($i = 0; $i &lt; 3; ++$i) {
        $o = $orders[$i];
        $station = $Stations[$o['location_id']];
        $system = $Systems[$station['system_id']];
        $security = $system['security_status'];
        printf('&lt;tr class=&quot;data&quot;&gt;'
               .  '&lt;td&gt;%10.2f ISK&lt;/td&gt;&lt;td&gt;%4d units&lt;/td&gt;&lt;td style=&quot;text-align:center&quot;&gt;%s&lt;/td&gt;'
               .  '&lt;td style=&quot;text-align:center&quot;&gt;%.1f&lt;/td&gt;&lt;td style=&quot;text-align:left&quot;&gt;%s&lt;/td&gt;&lt;/tr&gt;',
               $o['price'], $o['volume_remain'], $system['name'], $security, $station['name']);
    }
}

$esi-&gt;meta('GLOBALS', [ 'Stations' =&gt; $Stations,
                        'Systems'  =&gt; $Systems ]);
?&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;</pre><p class="western" style="orphans: 2">
<br/>

</p>
<pre class="shell-western">$ php -S localhost:9000
PHP 7.2.4 Development Server started at Fri Apr 13 21:39:02 2018
Listening on http://localhost:9000
Document root is /home/sven/EVE/SimpleESI
Press Ctrl-C to quit.
[Fri Apr 13 21:39:08 2018] 127.0.0.1:56846 [200]: /examples/example-8.php</pre><p class="western" style="orphans: 2">
<br/>

</p>
<p class="western" style="orphans: 2"><b>What it does:</b> it is the
same example as before, now embedded within HTML and extended <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">echo</span></font>-
&amp; <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">printf</span></font>-statements
to include HTML tagging. It further checks if it’s URL contains a
query argument with the name <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">debug</span></font>,
in which case it enables debug support for the SimpleESI object.</p>
<p class="western" style="orphans: 2"><img src="example-8a.png" name="example 8" align="right" width="694" height="346" border="0"/>
When
php is run with <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">-S
localhost:9000</span></font> does it start a small web server on the
local machine at port 9000 and the URL
<a class="western" href="http://localhost:9000/examples/example-8.php">http://localhost:9000/examples/example-8.php</a>
will open the example and display its output in a browser.<br clear="right"/>

</p>
<p class="western" style="orphans: 2"><br/>

</p>
<p class="western" style="orphans: 2"><img src="example-8b.png" name="example 8 debug" align="right" width="694" height="514" border="0"/>
When
opened with <a class="western" href="http://localhost:9000/examples/example-8.php?debug=1">http://localhost:9000/examples/example-8.php?debug=1</a>
does it include debugging information on the SimpleESI object. It
shows the time and number of bytes received since creation, the debug
level and a message for each event.<br clear="right"/>

</p>
<h4 class="western">9. Halt, who goes there?</h4>
<pre class="php-western">&lt;?php
require_once '../SimpleESI.php';

if (isset($_GET['code'])) {
    $code = $_GET['code'];
    setcookie('code', $code);
} elseif (isset($_GET['signout']))
    setcookie('code', '', 0);
elseif (isset($_COOKIE['code']))
    $code = $_COOKIE['code'];

echo &lt;&lt;&lt;'EOT'
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;style&gt;
table { background-color: #efefef; }
td    { font-size: 70%; padding-left: 5px; padding-right: 10px; padding-top: 0px; padding-bottom: 0px; }
&lt;/style&gt;&lt;/head&gt;&lt;body&gt;
EOT;

$esi = new SimpleESI('confidential');

$Authorization = $esi-&gt;meta('LastAuthorization');
if (empty($code) || empty($Authorization['code']) || $code !== $Authorization['code'])
    $Authorization = [ 'client_id'     =&gt; '...',
                       'client_secret' =&gt; '...',
                       'redirect_uri'  =&gt; 'http://localhost:9000/login.php',
                       'scopes'        =&gt; [ 'esi-characters.read_standings.v1' ] ];

if ($esi-&gt;auth($Authorization, $code) === false) {
    echo '&lt;h3&gt;&lt;p&gt;&lt;a href=&quot;'.$Authorization['auth_uri'].'&quot;&gt;Sign on&lt;/a&gt;&lt;/p&gt;&lt;/h3&gt;';
    echo '&lt;h6&gt;&lt;p&gt;Note: this example uses cookies and requests your permission to access private data on your'
        .' EVE Online account.&lt;/p&gt;&lt;p&gt;Once access has been granted through CCP\'s SSO sevice can it be refreshed by the'
        .' application indefinitely and until it is manually revoked.&lt;/p&gt;&lt;p&gt;To revoke an application\'s access'
        .' please go to:&lt;/p&gt;'
        .'&lt;p&gt;&lt;a href=&quot;https://community.eveonline.com/support/third-party-applications/&quot;&gt;'
        .'https://community.eveonline.com/support/third-party-applications/&lt;/a&gt;&lt;/p&gt;&lt;/h6&gt;&lt;/body&gt;';
    exit;
}

$esi-&gt;meta('LastAuthorization', $Authorization);
echo '&lt;h3&gt;&lt;p&gt;&lt;a href=&quot;'.$Authorization['redirect_uri'].'?signout=true&quot;&gt;Sign out&lt;/a&gt;&lt;/p&gt;&lt;/h3&gt;';

$t = $Authorization['expires'] - time();
printf('&lt;p&gt;Current token expires in %2d:%02d minutes.&lt;/p&gt;'.PHP_EOL, $t / 60, $t % 60);

$esi-&gt;get($Standings, 'characters/'.$Authorization['cid'].'/standings/', 0, $Authorization)
    -&gt;get($Factions, 'universe/factions/')
    -&gt;exec();
$FactionIdToName = array_column($Factions, 'name', 'faction_id');
$FactionStandings = [];
foreach ($Standings as $st)
    if ($st['from_type'] === 'faction')
        $FactionStandings[$FactionIdToName[$st['from_id']]] = $st['standing'];
arsort($FactionStandings, SORT_NUMERIC);

echo '&lt;p&gt;Faction standings of '.$Authorization['name'].':&lt;/p&gt;&lt;table&gt;';
foreach ($FactionStandings as $name =&gt; $standing)
    printf('&lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td style=&quot;text-align:right&quot;&gt;%.2f&lt;/td&gt;&lt;/tr&gt;', $name, $standing);
echo '&lt;/table&gt;&lt;/body&gt;';
?&gt;</pre><p class="western" style="orphans: 2">
<br/>

</p>
<pre class="shell-western">$ cd examples/
$ php -S localhost:9000
PHP 7.2.4 Development Server started at Fri Apr 20 14:43:11 2018
Listening on http://localhost:9000
Document root is /home/sven/EVE/SimpleESI/examples
Press Ctrl-C to quit.
[Fri Apr 20 14:43:23 2018] 127.0.0.1:39826 [200]: /login.php</pre><p class="western" style="orphans: 2">
<br/>

</p>
<p class="western" style="orphans: 2"><font face="Bitstream Vera Sans, sans-serif"><b>What
it does:</b></font> it determines if an authorization was previously
given, and if so tries to refresh it. If not does it prompt with a
link to obtain a new authorization. On success does it print the
faction standings of the character whose authorization was given as
well as the duration of the current authorization period.</p>
<p class="western" style="orphans: 2">For the example to work does
one need to register it as an application at
<a class="western" href="https://developers.eveonline.com/applications/create"><font face="Bitstream Vera Sans, sans-serif">https://developers.eveonline.com/applications/create</font></a>
with a redirection URI of <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">http://localhost:9000/login.php</span></font>
and a scope of <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">esi-characters.read_standings.v1</span></font>,
which is used for reading a character’s standings. Further does one
need to insert the client ID and the client secret given out by CCP
on registration as strings into the script (see where it has the
<font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">‘...’</span></font>
strings).</p>
<p class="western" style="orphans: 2"><img src="login-a.png" name="Image2" align="right" width="459" height="225" border="0"/>
When
the script is run for the first time does it not know of a previous
authorization nor of any code and so the call to the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">auth()</span></font>-method
will fail, leading the script to prompt the user with a link. The
link itself contains information about the request and will lead the
user to CCP’s Single Sign-On service. The information contained in
this link is provided by the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">auth()</span></font>-method
by inserting it into the array that was passed as argument.<br clear="right"/>

</p>
<p class="western" style="orphans: 2"><br/>

</p>
<p class="western" style="orphans: 2"><img src="login-b.png" name="Image3" align="right" width="459" height="551" border="0"/>
On
following the link is the user prompted to login at CCP’s web site,
to give authorization to the application and to choose for which
character it shall be.<br clear="right"/>

</p>
<p class="western" style="orphans: 2"><br/>

</p>
<p class="western" style="orphans: 2"><img src="login-c.png" name="Image4" align="right" width="459" height="418" border="0"/>
On
clicking the “Authorize” button will CCP’s web site redirect
back to <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">http://localhost:9000/login.php</span></font>
and provide a unique code to the script, which is passed on to the
<font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">auth()</span></font>-method
and used to receive tokens from CCP that are needed in making
authorized requests to the ESI server.<br clear="right"/>

</p>
<p class="western" style="orphans: 2">Although the initial code is
usable only once is it being given a secondary use by the script,
which is that of a “session identifier”. The script stores the
code inside the browser with a cookie, as well as on the server in
its meta database, together with further information about the
authorization. Each time the user accesses the script with a cookie
does it compare the code stored inside the cookie with the code
stored inside its database to determine if it still in session with
the same user, in which case it will refresh the authorization with
the help of the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">auth()</span></font>-method
and without sending the user back to the SSO service.</p>
<p class="western" style="orphans: 2">Clicking on the “Sign Out”
link will call the script with an argument of <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">signout=true</span></font>,
causing it to clear the cookie from the browser and so ending the
session.</p>
<p class="western" style="orphans: 2"><u>Note:</u> the example only
demonstrates how one can use the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">auth()</span></font>-method
to create a single-user application. The <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">auth()</span></font>-method
simply acquires the data needed to make authorized requests and helps
in creating and refreshing an authorization. It does not provide the
means for managing multiple users simultaneously, as this would go
beyond the intended scope of the method. Instead, when a full user
management is needed then it has to be implemented by the application
itself and it is also the responsibility of the application to keep
sensitive data safe for all users.</p>
<p class="western" style="orphans: 2">However, the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">auth()</span></font>-method
does store the character id inside the array among other data, which
subsequently is being used by SimpleESI to keep cached responses
separate for different users. This happens transparently whenever
authorized requests are queued and executed with the <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">get()</span></font>-
and <font face="Bitstream Vera Sans Mono, monospace"><span style="background: #dfdfdf">exec()</span></font>-method.</p>
<p class="western" style="orphans: 2"><br/>

</p>
</body>
</html>